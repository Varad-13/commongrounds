{% extends 'core/base.html' %}
{% block title %}Schedule - {{ request.user.username }}{% endblock %}
{% block content %}
<div class="h-full flex-shrink p-4 sm:ml-64 flex-col justify-end overflow-y-auto">
    <h2 class="text-2xl font-bold mb-4 dark:text-gray-400">Schedule for {{ request.user.username }}</h2>
    {% if schedules %}
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for schedule in schedules %}
                <div class="bg-gray-400 rounded-lg shadow-md overflow-hidden">
                    <div class="p-4">
                        <div class="mb-4">
                            {% if schedule.venue %}
                                {% if schedule.venue.venue_images.all %}
                                    <img src="{{ schedule.venue.venue_images.all.0.file.url }}" alt="Venue Image" class="w-full h-32 object-cover">
                                {% else %}
                                    <div class="w-full h-32 bg-gray-200 flex items-center justify-center">
                                        No Image
                                    </div>
                                {% endif %}
                                <p class="mt-2 text-gray-700">{{ schedule.venue.venue_name }}</p>
                            {% else %}
                                <div class="w-full h-32 bg-gray-200 flex items-center justify-center">
                                    N/A
                                </div>
                                <p class="mt-2 text-gray-700">N/A</p>
                            {% endif %}
                        </div>
                        <p class="text-gray-700 mb-2">
                            <span class="font-semibold">Service Name:</span>
                            {% if schedule.service %}
                                {{ schedule.service.service_type.service_name }}
                            {% else %}
                                N/A
                            {% endif %}
                        </p>
                        <p class="text-gray-700 mb-2">
                            <span class="font-semibold">Service Provider:</span>
                            {% if schedule.service %}
                                {{ schedule.service.provider.user.username }}
                            {% else %}
                                N/A
                            {% endif %}
                        </p>
                        <p class="text-gray-700 mb-2">
                            <span class="font-semibold">Start Time:</span>
                            {{ schedule.timing.starthour }}
                        </p>
                        <p class="text-gray-700 mb-2">
                            <span class="font-semibold">End Time:</span>
                            {{ schedule.timing.endhour }}
                        </p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-700">No schedules found.</p>
    {% endif %}
</div>
{% endblock %}
